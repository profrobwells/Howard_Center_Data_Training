---
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

::: {style="text-align: center; color: #337DFF;"}
# How Journalists Ask Questions of Data

### Digital Certificate Program

#### Philip Merrill College of Journalism

(ver April 12, 2025)
:::

<br>

::: {style="text-align: center;"}
<img src="assets/Merrill_logo.png" width="370" height="200"/>
:::

::: {style="font-weight:bold;"}
``` markdown
Rob Wells, Ph.D., Associate Professor
```
:::

6 subtopics per course 30 video each - per subtopic

3 hours of content 3-4 lessons per class

1.How journalists look and think about idea generation for data; How to
generate data story ideas 2.dpylr verbs (actions that allow users to
solve data manipulation challenges), and the questions each enables us
to ask 3.Grouping and summarizing (counts, sums and averages); Joins
(combining rows from datasets) and what it enables 4. Basic statistics
5.Text analysis 6.Exploratory data visualization

```{r}
library(tidyverse)
```

We'll explore Life Expectancy Data by country, 1800 to present with
projections to 2100

Source is [gapminder.org](https://www.gapminder.org/data/)

[Documentation is
here](https://www.gapminder.org/data/documentation/gd004/)

#### Import Life Expectancy Data
```{r}
life_expect <- read.csv("./assets/lex.csv")
```


#### Examine Data
```{r}
head(glimpse(life_expect))

```

File types:

-  <chr> = character, text data
-  <dbl> = numeric data

302 columns - Each year life expectancy data
196 rows - each row is a country (195 counties)


#Highest life expectancy
Which country has the highest life expectancy in 2025?
```{r}

life_expect |> 
  filter(X2025 == max(X2025, na.rm = TRUE)) |>
  select(country, X2025)


```
Japan and Singapore, both at 86 years!

#Lowest life expectancy
Which country has the lowest life expectancy in 2025?

```{r}

life_expect |> 
  filter(X2025 == min(X2025, na.rm = TRUE)) |>
  select(country, X2025)


```

Obviously, we have a data problem, with Hong Kong and Liechtenstein registering at zero. Let's adjust our query for results greater than zero
```{r}

life_expect |> 
  # First filter out zeros and NA values
  filter(X2025 > 0, !is.na(X2025)) |>
  # Then find the minimum among remaining values
  filter(X2025 == min(X2025, na.rm = TRUE)) |>
  select(country, X2025)


```


#Average life expectancy in 2025
```{r}
life2025 <- mean(life_expect$X2025)
life2025

```

#Average life expectancy in 1925
```{r}
#Here we added na.rm = TRUE to allow the calculation to skip blank values
life1925 <- mean(life_expect$X1925, na.rm = TRUE)
life1925

```

# Percentage change in life expectancy, 1925 v 2025
```{r}
(life2025-life1925)/life1925 *100


```

Average life expectancy has increased by about 92% since 1925.

```{r}



```



#YOUR TURN
Using the examples above
```{r}



```




We see from our quick glance that Andorra lacks entries for the first few years. Let's focus on Andorra using a filter

```{r}

Andorra <- life_expect |> 
  filter(country == "Andorra") |> 
   # Convert to long format so we can work with years as values
  pivot_longer(
    cols = starts_with("X"), 
    names_to = "year",
    values_to = "life_expectancy"
  ) |>
  # Remove the "X" prefix from year names and convert to numeric
  mutate(year = as.numeric(gsub("X", "", year))) |>
  # Keep only years with non-NA values
  filter(!is.na(life_expectancy)) |>
  # Sort by year (optional)
  arrange(year)


```

